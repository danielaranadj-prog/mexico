---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

// Ordenar posts
const allPosts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Bitácora | Instante Trips">
  
  <main class="min-h-screen pb-24 font-sans text-white bg-[#0b1116]">
    
    <div class="relative w-full h-[40vh] min-h-[300px]">
      <img 
        src="https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?q=80&w=2070&auto=format&fit=crop" 
        alt="Paisaje México" 
        class="w-full h-full object-cover"
      />
      <div class="absolute inset-0 bg-black/40 flex flex-col items-center justify-center text-center px-4">
        <span class="text-xs uppercase tracking-[0.4em] text-[#75AADB] mb-4 font-bold">Travel Blog</span>
        <h1 class="text-4xl md:text-6xl font-bold text-white mb-4 tracking-tight">
          Instante Trips
        </h1>
        <p class="text-lg md:text-xl text-gray-200 font-light italic">
          No he estado en todas partes, pero están en mi lista.
        </p>
      </div>
    </div>

    <div class="relative z-20 max-w-5xl mx-auto px-6 -mt-16 mb-24">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        
        <div class="relative group h-48 overflow-hidden rounded-xl shadow-2xl border border-white/10">
          <img src="https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"/>
          <div class="absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors"></div>
          <div class="absolute inset-0 flex items-center justify-center">
            <span class="bg-white/90 text-[#0b1116] px-6 py-2 font-bold uppercase tracking-widest text-sm hover:bg-[#75AADB] hover:text-white transition-colors cursor-pointer backdrop-blur-sm">
              Logística
            </span>
          </div>
        </div>

        <div class="relative group h-48 overflow-hidden rounded-xl shadow-2xl border border-white/10">
          <img src="https://images.unsplash.com/photo-1555529733-0e670560f7e1?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"/>
          <div class="absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors"></div>
          <div class="absolute inset-0 flex items-center justify-center">
            <span class="bg-white/90 text-[#0b1116] px-6 py-2 font-bold uppercase tracking-widest text-sm hover:bg-[#F4B942] hover:text-black transition-colors cursor-pointer backdrop-blur-sm">
              Seguridad
            </span>
          </div>
        </div>

        <div class="relative group h-48 overflow-hidden rounded-xl shadow-2xl border border-white/10">
          <img src="https://images.unsplash.com/photo-1510153706223-ced2b73fb067?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"/>
          <div class="absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors"></div>
          <div class="absolute inset-0 flex items-center justify-center">
            <span class="bg-white/90 text-[#0b1116] px-6 py-2 font-bold uppercase tracking-widest text-sm hover:bg-[#75AADB] hover:text-white transition-colors cursor-pointer backdrop-blur-sm">
              Relax
            </span>
          </div>
        </div>

      </div>
    </div>

    <section class="max-w-3xl mx-auto px-6">
      
      <div class="flex items-center justify-center gap-4 mb-16">
        <div class="h-[1px] w-12 bg-gray-700"></div>
        <h3 class="text-xl font-light italic text-gray-400">Últimas Historias</h3>
        <div class="h-[1px] w-12 bg-gray-700"></div>
      </div>

      <div class="flex flex-col gap-20">
        {allPosts.map((post) => (
          <article class="flex flex-col items-center text-center">
            
            <a href={`/mexico/blog/${post.slug}`} class="max-w-2xl w-full aspect-[3/2] overflow-hidden rounded-sm mb-8 group relative block">
              <img 
                src={post.data.image.url} 
                alt={post.data.image.alt} 
                class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
              />
              {post.data.isSecurityAlert && (
                 <div class="absolute top-4 right-4 bg-[#F4B942] text-black text-xs font-bold px-3 py-1 uppercase tracking-wider">
                   ⚠️ Importante
                 </div>
              )}
            </a>

            <div class="flex items-center gap-3 mb-4 text-xs font-bold uppercase tracking-widest text-gray-500">
               <span class="text-[#75AADB]">{post.data.tags[0]}</span>
               <span>•</span>
               <span>{post.data.pubDate.toLocaleDateString()}</span>
            </div>

            <h2 class="text-3xl md:text-4xl font-bold text-white mb-4 leading-tight hover:text-[#75AADB] transition-colors">
              <a href={`/mexico/blog/${post.slug}`}>
                {post.data.title}
              </a>
            </h2>

            <p class="text-gray-400 font-light leading-relaxed max-w-xl mb-6">
              {post.data.description}
            </p>

            <a href={`/mexico/blog/${post.slug}`} class="text-[#F4B942] text-xs font-bold uppercase tracking-[0.2em] border-b border-[#F4B942] pb-1 hover:text-white hover:border-white transition-all">
              Leer Artículo Completo
            </a>

          </article>
        ))}
      </div>

    </section>

  </main>
</Layout>