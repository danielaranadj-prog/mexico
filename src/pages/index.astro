---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Hero from '../components/Hero.astro';
import Card from '../components/Card.astro';
import TipCard from '../components/TipCard.astro';
import { getCollection } from 'astro:content';

// Cargar destinos dinÃ¡micamente desde la colecciÃ³n de contenido
const destinosCollection = await getCollection('destinos');

// Mapear a formato de tarjeta
const destinos = destinosCollection.map(destino => ({
    id: destino.slug,
    title: destino.data.title,
    tag: destino.data.secciones?.[0]?.label || 'Destino',
    activity: destino.data.desc,
    img: destino.data.img
}));

const feriados = [
    { fecha: "01 Ene", nombre: "AÃ±o Nuevo" },
    { fecha: "May 25", nombre: "RevoluciÃ³n de Mayo" },
    { fecha: "Jul 09", nombre: "DÃ­a de la Independencia" },
    { fecha: "Dec 25", nombre: "Navidad" }
];
---

<Layout title="GuÃ­a MÃ©xico">
    <Navbar />
    
    <Hero 
        title="MÃ‰XICO" 
        slogan="Color, sabor y tradiciÃ³n en cada rincÃ³n."
        videoSrc="/mexico/intro.mp4" 
    />

    <main class="container">
        
        <!-- NUEVA SECCIÃ“N: SOBRE MÃ‰XICO -->
        <section id="mexico" class="mb-section mexico-intro">
            <div class="intro-content">
                <div class="intro-text">
                    <span class="intro-badge">ðŸ‡²ðŸ‡½ Bienvenido</span>
                    <h2>Descubre <span class="highlight-gold">MÃ©xico</span></h2>
                    <p class="intro-lead">
                        Un paÃ­s vibrante donde las culturas ancestrales conviven con la modernidad.
                        Desde las playas turquesas del Caribe hasta los pueblos mÃ¡gicos y las grandes metrÃ³polis,
                        MÃ©xico te espera con los brazos abiertos.
                    </p>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-number">32</span>
                        <span class="stat-label">Estados<br/>para explorar</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">4</span>
                        <span class="stat-label">Zonas<br/>Horarias</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">35</span>
                        <span class="stat-label">Sitios<br/>UNESCO</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">âˆž</span>
                        <span class="stat-label">Calidez<br/>humana</span>
                    </div>
                </div>
            </div>
            
            <div class="mexico-highlights">
                <div class="highlight-card">
                    <div class="highlight-icon"><i class="fas fa-drumstick-bite"></i></div>
                    <h4>GastronomÃ­a</h4>
                    <p>Tacos, mole, tequila y una variedad de sabores Patrimonio de la Humanidad.</p>
                </div>
                <div class="highlight-card">
                    <div class="highlight-icon"><i class="fas fa-music"></i></div>
                    <h4>Cultura</h4>
                    <p>Mariachis, DÃ­a de Muertos y el legado de Mayas y Aztecas.</p>
                </div>
                <div class="highlight-card">
                    <div class="highlight-icon"><i class="fas fa-mountain"></i></div>
                    <h4>Naturaleza</h4>
                    <p>Cenotes, selvas, montaÃ±as y playas paradisÃ­acas.</p>
                </div>
            </div>
        </section>

        <section id="destinos" class="mb-section scroll-offset">
            <div class="section-header">
                <h2>Destinos recomendados</h2>
            </div>
            <div class="grid">
                {destinos.map((d) => (
                    <a href={`/mexico/destinos/${d.id}`} class="card-link">
                        <Card title={d.title} tag={d.tag} activity={d.activity} img={d.img} />
                    </a>
                ))}
            </div>
        </section>


        <section id="planifica" class="mb-section scroll-offset">
            <div class="section-header">
                <h2>Planifica tu Viaje</h2>
            </div>
            
            <a href="/mexico/tours" class="tours-banner-link">
                <div class="tours-banner">
                    <div class="banner-icon">
                        <i class="fas fa-ticket-alt"></i>
                    </div>
                    <div class="banner-info">
                        <h3>Reservar Tours y Actividades</h3>
                        <p>Busca excursiones en todas las ciudades y arma tu itinerario.</p>
                    </div>
                    <div class="banner-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
            </a>

            <div class="tips-grid">
                <TipCard icon="ðŸ’µ" title="Moneda" text="Usa el 'DÃ³lar Blue' para obtener el mejor cambio en efectivo." />
                <TipCard icon="ðŸ›‚" title="Visas" text="Turismo libre por 90 dÃ­as para la mayorÃ­a de paÃ­ses." />
                <TipCard icon="âœˆï¸" title="Transporte" text="Vuelos internos para distancias largas y tarjeta SUBE para ciudad." />
                <TipCard icon="â˜€ï¸" title="Clima" text="Primavera (Sep-Nov) y OtoÃ±o son las mejores Ã©pocas." />
            </div>
        </section>

        <section id="eventos" class="mb-section scroll-offset">
            <div class="section-header">
                <h2>Eventos y Feriados</h2>
            </div>
            <div class="event-container">
                <div class="event-card">
                    <h3>Festivales Anuales</h3>
                    <ul class="fest-list">
                        <li><i class="fas fa-music"></i> <strong>Vive Latino:</strong> Marzo (CDMX).</li>
                        <li><i class="fas fa-skull"></i> <strong>DÃ­a de Muertos:</strong> Noviembre (Todo el paÃ­s).</li>
                        <li><i class="fas fa-star"></i> <strong>Guelaguetza:</strong> Julio (Oaxaca).</li>
                    </ul>
                </div>
                <div class="event-card">
                    <h3>Feriados Nacionales</h3>
                    <div class="holiday-list">
                        {feriados.map(f => (
                            <div class="holiday-item">
                                <span class="h-date">{f.fecha}</span>
                                <span class="h-name">{f.nombre}</span>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        </section>

        <section id="faq" class="mb-section scroll-offset">
            <div class="section-header">
                <h2>Preguntas Frecuentes</h2>
            </div>
            <div class="faq-container">
                <details class="faq-item" name="faq-group">
                    <summary>Â¿Es seguro viajar a MÃ©xico?</summary>
                    <p>MÃ©xico es un paÃ­s grande y diverso. Como en cualquier lugar, hay zonas mÃ¡s seguras que otras. MantÃ©n precauciones bÃ¡sicas y consulta alertas de viaje recientes.</p>
                </details>

                <details class="faq-item" name="faq-group">
                    <summary>Â¿QuÃ© moneda debo llevar?</summary>
                    <p>La moneda oficial es el Peso Mexicano (MXN). En zonas turÃ­sticas aceptan dÃ³lares, pero es mejor pagar en pesos.</p>
                </details>

                <details class="faq-item" name="faq-group">
                    <summary>Â¿A quÃ© hora se cena?</summary>
                    <p>Los horarios son variables, pero la cena suele ser entre las 20:00 y 22:00 hs.</p>
                </details>

                <details class="faq-item" name="faq-group">
                    <summary>Â¿Se deja propina?</summary>
                    <p>No es obligatoria por ley, pero se acostumbra dejar el 10% si el servicio fue bueno.</p>
                </details>

                <details class="faq-item" name="faq-group">
                    <summary>Â¿Necesito adaptador?</summary>
                    <p>Usamos clavijas tipo A y B (planas), igual que en Estados Unidos. El voltaje es 127V.</p>
                </details>
                
                <details class="faq-item" name="faq-group">
                    <summary>Â¿CÃ³mo tengo internet?</summary>
                    <p>Puedes comprar una tarjeta SIM (Telcel, Movistar, AT&T) en cualquier OXXO o tienda de conveniencia.</p>
                </details>
            </div>
        </section>

    </main>
</Layout>

<style>
    /* PADDING CORREGIDO PARA SEPARAR DEL HERO */
    .container { 
        max-width: 1100px; 
        margin: 0 auto; 
        padding: 60px 20px 0 20px; 
    }

    .mb-section { margin-bottom: 80px; }
    .scroll-offset { scroll-margin-top: 100px; }
    
    .section-header { 
        border-left: 6px solid var(--gold); 
        padding-left: 15px; 
        margin-bottom: 30px; 
    }
    
    /* TITULO DE SECCION MAS PEQUEÃ‘O */
    .section-header h2 { 
        font-size: 1.5rem; 
        font-weight: 800; 
        color: var(--title); 
        margin: 0; 
        text-transform: uppercase;
        letter-spacing: -0.5px;
    }
    
    .grid, .tips-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
    
    /* BANNER TOURS PREMIUM */
    .tours-banner-link { text-decoration: none; display: block; margin-bottom: 25px; }
    .tours-banner {
        background: linear-gradient(135deg, var(--card-bg) 0%, rgba(244, 185, 66, 0.08) 50%, rgba(117, 170, 219, 0.08) 100%);
        border: 1px solid transparent;
        border-radius: 20px;
        padding: 28px;
        display: flex; 
        align-items: center; 
        gap: 20px;
        transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), 
                    box-shadow 0.4s ease;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        position: relative;
        overflow: hidden;
    }
    
    /* Gradient border using ::before */
    .tours-banner::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 20px;
        padding: 2px;
        background: linear-gradient(135deg, var(--gold), var(--celeste), var(--gold));
        background-size: 300% 300%;
        -webkit-mask: 
            linear-gradient(#fff 0 0) content-box, 
            linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        opacity: 0.5;
        animation: borderGlow 4s ease infinite;
        transition: opacity 0.4s ease;
    }
    
    .tours-banner:hover::before {
        opacity: 1;
    }
    
    .tours-banner:hover { 
        transform: translateY(-5px); 
        box-shadow: 0 20px 40px rgba(244, 185, 66, 0.15),
                    0 0 30px rgba(117, 170, 219, 0.1); 
    }
    
    .banner-icon { 
        background: linear-gradient(135deg, var(--gold), #fcd34d); 
        color: #1a202c; 
        width: 56px; 
        height: 56px; 
        border-radius: 16px; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        font-size: 1.5rem; 
        flex-shrink: 0; 
        box-shadow: 0 8px 20px rgba(244, 185, 66, 0.35);
        position: relative;
        z-index: 1;
    }
    
    .banner-info { position: relative; z-index: 1; }
    .banner-info h3 { 
        margin: 0 0 6px 0; 
        color: var(--title); 
        font-size: 1.25rem; 
        font-weight: 800; 
    }
    .banner-info p { 
        margin: 0; 
        color: var(--text-secondary); 
        font-size: 0.95rem; 
    }
    
    .banner-arrow { 
        margin-left: auto; 
        color: var(--gold); 
        font-size: 1.2rem; 
        transition: transform 0.3s ease;
        position: relative;
        z-index: 1;
    }
    
    .tours-banner:hover .banner-arrow {
        transform: translateX(5px);
    }
    
    /* TARJETAS */
    .card-link { display: block; text-decoration: none; transition: transform 0.3s ease; }
    .card-link:hover { transform: translateY(-5px); }
    .card-link :global(h3), .card-link :global(h4), .card-link :global(.card-title) { font-weight: 700 !important; font-style: normal !important; }

    /* EVENTOS Y FAQ PREMIUM */
    .event-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 25px; }
    
    .event-card { 
        background: var(--card-bg); 
        padding: 28px; 
        border-radius: 20px; 
        border: 1px solid var(--border);
        position: relative;
        transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), box-shadow 0.4s ease;
    }
    
    .event-card::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 20px;
        padding: 2px;
        background: linear-gradient(135deg, var(--gold), var(--celeste), var(--gold));
        background-size: 300% 300%;
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        opacity: 0;
        transition: opacity 0.4s ease;
        animation: borderGlow 4s ease infinite;
    }
    
    .event-card:hover::before { opacity: 1; }
    .event-card:hover { 
        transform: translateY(-5px); 
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.08);
    }
    
    .event-card h3 { 
        font-size: 1.1rem; 
        margin: 0 0 15px 0;
        background: linear-gradient(90deg, var(--gold), var(--celeste));
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    
    .fest-list { list-style: none; padding: 0; margin: 0; }
    .fest-list li { 
        margin-bottom: 12px; 
        display: flex; 
        gap: 12px; 
        font-size: 0.95rem;
        align-items: center;
    }
    .fest-list li i { color: var(--gold); width: 18px; text-align: center; }
    
    .holiday-list { display: flex; flex-direction: column; gap: 12px; }
    .holiday-item { 
        display: flex; 
        justify-content: space-between; 
        border-bottom: 1px dashed var(--border); 
        padding-bottom: 8px; 
        font-size: 0.9rem; 
    }
    .h-date { 
        font-weight: 700; 
        color: var(--gold); 
        font-family: 'Montserrat', sans-serif; 
    }
    
    .faq-container { display: flex; flex-direction: column; gap: 12px; }
    
    .faq-item { 
        background: var(--card-bg); 
        border-radius: 16px; 
        border: 1px solid var(--border); 
        padding: 18px 22px; 
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    
    .faq-item:hover {
        border-color: var(--gold);
        box-shadow: 0 4px 20px rgba(244, 185, 66, 0.1);
    }
    
    .faq-item[open] {
        border-color: var(--celeste);
        box-shadow: 0 8px 30px rgba(117, 170, 219, 0.15);
    }
    
    .faq-item summary { 
        font-weight: 700; 
        cursor: pointer; 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        list-style: none; 
        color: var(--title);
        font-family: 'Montserrat', sans-serif;
        font-size: 0.95rem;
        transition: color 0.3s ease;
    }
    
    .faq-item summary:hover { color: var(--gold); }
    
    .faq-item summary::after {
        content: '+';
        font-size: 1.2rem;
        color: var(--gold);
        font-weight: 600;
        transition: transform 0.3s ease;
    }
    
    .faq-item[open] summary::after {
        transform: rotate(45deg);
    }
    
    .faq-item p { 
        padding-top: 15px; 
        margin-top: 15px; 
        border-top: 1px solid var(--border); 
        color: var(--text-secondary); 
        font-size: 0.95rem; 
        line-height: 1.7; 
    }

    /* ========================================
       SECCIÃ“N SOBRE ARGENTINA - PREMIUM STYLES
       ======================================== */
    
    .mexico-intro {
        text-align: center;
        padding: 0;
    }
    .mexico-highlights {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
    }
    /* Responsive para la secciÃ³n Mexico */
    @media (max-width: 768px) {
        .mexico-highlights { grid-template-columns: 1fr; }
    }
</style>